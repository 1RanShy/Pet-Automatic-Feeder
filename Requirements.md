# Requirements


~~~text
To do List
[X] SR04 Delete usleep(10) Then test 试过了这个删了不行。
[X] Blue Thread  明天写吧
[x] 测试一下改为vector行不行
没必要改，因为pigpio库里就要求是char * 可以在 buff改变之后再用vector改变。
[x] 蓝牙接收 蓝牙传输命令
[ ] 开启和关闭自动喂食模式
[ ] 能传给手机什么信息？
1. 猫咪正在进食


蓝牙传输信息
[X] 发送基本上解决
[X] 接收还有问题 

~~~
~~~text
To do List:

[X] SR04: Delete usleep(10) then test. Tried it, deleting it doesn't work.
[X] Blue Thread: Write it tomorrow.
[x] Test if changing to vector works. No need to change it because the pigpio library requires it to be a char *, and it can be changed to a vector after buff is changed.

[ ] Bluetooth receiving and transmitting commands.
[ ] Enable and disable automatic feeding mode.
[ ] What information can be sent to the phone?

Cat is currently eating.
Bluetooth transmission information:
[X] Sending is basically resolved.
[X] Receiving still has issues.
~~~

~~~text
自动喂食的开关写好了，现在需要 

蓝牙协议：
自动喂食
CAAAC：切换自动还是手动喂食
11111：自动喂食状态
00000：手动喂食状态
通过判断 autoAddFoodFlag：来改变dataTosend的值

发送完毕 dataToSend 全改为R
dataRerceived 使用完毕 全改为z

命令格式是：
CXXXC 头尾两个C表示这个确实是有效命令
XXX是用来判断这一段命令到底是什么操作的标识符
R和Z不要在自定义命令中出现
~~~

~~~text
The switch for automatic feeding is done, now we need a Bluetooth protocol:
Auto-feeding
CAAAC: switch between automatic and manual feeding
11111: automatic feeding mode
00000: manual feeding mode
Change the value of dataToSend by checking the autoAddFoodFlag

After sending, change all values of dataToSend to "R"
After using dataReceived, change all values to "z"

The command format is:
CXXXC, where the two "C"s at the beginning and end indicate a valid command
"XXX" is the identifier used to determine the operation of this command
Do not use "R" and "Z" in custom commands.
~~~



## To Do
~~~text
[x] 测试 改 水泵
[x] 该电路图 水泵现在是 tx边 倒数第二个 把它改成别的引脚 倒数三个留给servo engine
[x] 水泵和SR04的联合调试
~~~

# The function which will be added later
~~~text
[ ] 手动更改最大能够加到多大的深度

这个我想想：
    1. 改程序里面的最大深度
    2. 改模型里面 猫粮盆里的位置
[ ] 确定一下 食物少时候的多级的转向是大还是小
    distance大，说明食物剩余少，开始添加食物
    distance小，说明食物剩余多，停止添加食物
[ ] 如何让树莓派开机自启动 main程序

食物的回收，使用定时器，里面带点延迟到底行不行？
~~~

~~~text
[ ] Manually change the maximum depth that can be reached

Here's what I'm thinking:
1. Modify the maximum depth in the program
2. Adjust the position of the cat food bowl in the model

[ ] Determine the direction of the multi-level rotation when there is less food
If the distance is large, it means there is little food left, and it's time to add food
If the distance is small, it means there is plenty of food left, and it's time to stop adding food

[ ] How to make the Raspberry Pi automatically start the main program at boot

Regarding the food retrieval, using a timer with some delay inside, is that feasible?
~~~



# 要改的错误
~~~text
人体探测一起出错为什么一直在发33333,在addFood.c文件中。
~~~




# Problems I met
~~~text
经过检测和实验：
    水泵工作时间产生的强电流（约等于100ma）干扰了电路的正常工作，导致SR04工作的不稳定，导致测量距离的不稳定。
解决办法：
    每次开启SR04时，先关闭水泵。

After detection and experimentation:

The strong electric current (about 100mA) generated by the water pump during operation interferes with the normal operation of the circuit, causing instability in the operation of SR04 and resulting in unstable distance measurement.

Solution:

Turn off the water pump before turning on SR04 each time.

~~~

~~~text
1. 自动喂食和手动喂食
2. 在手机app上使用按钮切换自动和手动喂食模式
3. 可判断宠物是否正在吃东西，显示此状态在手机上
4. 可是使用蓝牙与猫咪互动

1. Automatic and manual feeding
2. Use buttons on the mobile app to switch between automatic and manual feeding modes
3. Ability to detect whether the pet is currently eating and display this 4. status on the mobile app
Ability to interact with the cat via Bluetooth.
~~~

~~~text
1. 改变自动喂食与手动喂食模式
2. 通过人体传感器检测宠物是否在进食
3. 在自动喂食模式下：通过声波测距传感器判断食物的剩余量来自动添加食物
1. Change between automatic and manual feeding modes
2. Detect whether the pet is eating through a human body sensor
3. In automatic feeding mode: use an ultrasonic distance sensor to determine the remaining amount of food and automatically add food.
~~~



# Pin 

~~~text
Bluetooth demo has worked properly. It takes me three days to fix it. Finally it works, but i still do not know why it can not work.
~~~







